{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="row">
    {# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ #}
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                <h5>üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h5>
                <span class="badge bg-light text-dark">{{ categories.paginator.count }} –∑–∞–ø–∏—Å–µ–π</span>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-sm table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–ü–æ–¥–∫–∞—Ç.</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for cat in categories %}
                                <tr>
                                    <td>{{ cat.id }}</td>
                                    <td><strong>{{ cat.name }}</strong></td>
                                    <td>
                                        <span class="badge bg-secondary">{{ cat.subcategories.count }}</span>
                                    </td>
                                    <td>
                                        <div class="btn-group btn-group-sm" role="group">
                                            <a href="{# url 'category_edit' cat.id #}" class="btn btn-primary" title="–ò–∑–º–µ–Ω–∏—Ç—å">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <form method="post" action="{% url 'category_delete' cat.id %}" style="display: inline;">
                                                {% csrf_token %}
                                                <button type="submit" class="btn btn-outline-danger" title="–£–¥–∞–ª–∏—Ç—å"
                                                        onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é {{ cat.name }}?');">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </div>
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="4" class="text-center text-muted py-3">
                                        <i class="fas fa-folder-open fa-2x mb-2"></i><br>
                                        –ù–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% include "main/pagination.html" with page_obj=categories prefix='cat_' %}
            </div>
        </div>
    </div>

    {# –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ #}
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                <h5>üìÇ –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h5>
                <span class="badge bg-light text-dark">{{ subcategories.paginator.count }} –∑–∞–ø–∏—Å–µ–π</span>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-sm table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for sub in subcategories %}
                                <tr>
                                    <td>{{ sub.id }}</td>
                                    <td>
                                        <span class="badge bg-primary">{{ sub.category.name }}</span>
                                    </td>
                                    <td>{{ sub.name }}</td>
                                    <td>
                                        <div class="btn-group btn-group-sm" role="group">
                                            <a href="{# url 'category_edit' sub.id #}" class="btn btn-primary" title="–ò–∑–º–µ–Ω–∏—Ç—å">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <form method="post" action="{% url 'category_delete' sub.id %}" style="display: inline;">
                                                {% csrf_token %}
                                                <button type="submit" class="btn btn-outline-danger" title="–£–¥–∞–ª–∏—Ç—å"
                                                        onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é \"{{ sub.name }}\"?');">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </div>
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="4" class="text-center text-muted py-3">
                                        <i class="fas fa-tags fa-2x mb-2"></i><br>
                                        –ù–µ—Ç –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% include "main/pagination.html" with page_obj=subcategories prefix='sub_' %}
            </div>
        </div>
    </div>

    {# –°—Ç–∞—Ç—É—Å—ã #}
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                <h5>üìä –°—Ç–∞—Ç—É—Å—ã</h5>
                <span class="badge bg-light text-dark">{{ statuses.paginator.count }} –∑–∞–ø–∏—Å–µ–π</span>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-sm table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for s in statuses %}
                                <tr>
                                    <td>{{ s.id }}</td>
                                    <td>{{ s.name }}</td>
                                    <td>
                                        <div class="btn-group btn-group-sm" role="group">
                                            <a href="{% url 'status_edit' s.id %}" class="btn btn-primary" title="–ò–∑–º–µ–Ω–∏—Ç—å">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <form method="get" action="{% url 'status_delete' s.id %}" style="display: inline;">
                                                {% csrf_token %}
                                                <button type="submit" class="btn btn-outline-danger" title="–£–¥–∞–ª–∏—Ç—å"
                                                        onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ç—É—Å \"{{ s.name }}\"?');">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </div>
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="3" class="text-center text-muted py-3">
                                        <i class="fas fa-flag fa-2x mb-2"></i><br>
                                        –ù–µ—Ç —Å—Ç–∞—Ç—É—Å–æ–≤
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% include "main/pagination.html" with page_obj=statuses prefix='stat_' %}
            </div>
        </div>
    </div>

    {# –¢–∏–ø—ã #}
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
                <h5>üîÑ –¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π</h5>
                <span class="badge bg-light text-dark">{{ types.paginator.count }} –∑–∞–ø–∏—Å–µ–π</span>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-sm table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for t in types %}
                                <tr>
                                    <td>{{ t.id }}</td>
                                    <td>{{ t.name }}</td>
                                    <td>
                                        <div class="btn-group btn-group-sm" role="group">
                                            <a href="{% url 'type_edit' t.id %}" class="btn btn-primary" title="–ò–∑–º–µ–Ω–∏—Ç—å">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <form method="post" action="{% url 'type_delete' t.id %}" style="display: inline;">
                                                {% csrf_token %}
                                                <button type="submit" class="btn btn-outline-danger" title="–£–¥–∞–ª–∏—Ç—å"
                                                        onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Ç–∏–ø \"{{ t.name }}\"?');">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </div>
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="3" class="text-center text-muted py-3">
                                        <i class="fas fa-exchange-alt fa-2x mb-2"></i><br>
                                        –ù–µ—Ç —Ç–∏–ø–æ–≤
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% include "main/pagination.html" with page_obj=types prefix='type_' %}
            </div>
        </div>
    </div>

    {# –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è #}
    <div class="text-center mt-4">
        <a href="{% url 'reference_add' %}" class="btn btn-primary">
            <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
        </a>
    </div>
</div>
{% endblock %}
